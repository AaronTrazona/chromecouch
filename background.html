<script src="assets/jquery.min.js"></script>
<script>
  function request(options, callback) {
    var reqOpts = {
      success: function(data){callback({data: data, ok: true})},
      error: function(error){callback({data: error, ok: false})},
      dataType: "json",
      contentType: "application/json",
      timeout: 5000
    }
    $.extend(reqOpts, options);
    $.ajax(reqOpts);
  }
  
  chrome.extension.onRequest.addListener(function(req, sender, callback) { 
    request(req.options, callback);
  });
</script>