<script src="assets/jquery.min.js"></script>
<script>
  function request(action, options, callback) {
    $.ajax({
      url: options.url,
      data: JSON.stringify(options.data),
      success: callback,
      error: callback,
      type: action,
      dataType: "json",
      contentType: "application/json"
    })
  }
  
  chrome.extension.onRequest.addListener(function(req, sender, callback) { request(req.action, req.options, callback) });
</script>